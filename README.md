

# box10

CRAZY LINE通关

在买魔方时，卖家送了一个小玩具，长这样，一个盒里，装有10个不同形状的线条，关卡会提前摆好一些线条，需要做的是把剩余的线条摆放进去。
Image:

![](https://github.com/GuohuaQiu/box10/blob/main/game.jpg)

注意：如果看不到上面的图片，可查看以下文档

文档：CRAZY LINE通关.note

链接：http://note.youdao.com/noteshare?id=2b9f3c5d2f9c80259e8a110534e80794&sub=6B9292A568574D6A9221841788ECE501


> 关卡如下

![](https://github.com/GuohuaQiu/box10/blob/main/game_stage.jpg)


端午节在家和小宝一起玩，前面的关卡比较简单，越到后面越烧脑，小宝又缠我快点解出来，于是决定用PYTHON写一个算法来搞定。

但如何能表示这些图形呢，我只想快速的写解决算法，UI上并不想多花心思。
尝试用字符组合来表示这些曲线，只要横和坚两个字符就够了，但表示不同的曲线需要用颜色来区分，控制台提供的颜色数不够，
只要搭配背景色来区分，这样十个线条就能分辨出来了。
> 实际运行结果如下：这是在LINUX控制台下的效果，WINDOWS无效。

![](https://github.com/GuohuaQiu/box10/blob/main/game_2.jpg)


**算法**

把所有需要放置的线条排序，依次按全枚举的方式放置，只到找到一种可以全部放进去的序列

**坑**

按上面的算法很快就算出了结果，但有的关卡出现了交叉的现象，线条是实体的不能交叉。说明模型有问题，需要把节点之间的点也做为模型的一部分。

**算法改进**

按最初的算法，最难的一关，也就是只放置了两个线条，需要40分钟，（实践证明关了LOG以后，只需要20秒了，PYTHON 如果要有类似C语言的宏就好了，前期为了调试算法，加了太多的LOG），由于想到改进算法。

>改进后的算法是这样的：
把每种线条所有可能的摆放方式提前枚举出来，在前面的线条放置时，直接把后面的线条有可能冲突的节点移除，这样后面节点就只会枚举不和前面冲突的节点了。
改进后的算法最难的一关只要2秒就出结果了（关掉LOG）

一种线条的所有可能性
1. 首先定义一个初始形态，
2. 然后水平移动，上下移动，这是一种形态下的所有位置。
3. 然后依次旋转90度，重复2，共三次。
4. 做镜像，重复2，3

对于有的图形，旋转或者镜像是不需要的，这样可能性会少一些

比如十字形的，既不需要旋转，也不需要镜像，可能性最少。

但如F形的，既需要旋转，也需要镜像，可能性最多，达到92种可能性。不管怎么说，这都是有限的形态，所以改进后的算法可以实施。
